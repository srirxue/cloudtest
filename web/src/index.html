<!DOCTYPE html>
<html style="height: 100%; width: 100%; margin: 0; padding: 0">

<head>
    <title></title>
    <!-- <link rel="stylesheet" type="text/css" href="http://w2ui.com/src/w2ui-1.4.3.min.css" /> -->
    <link rel="stylesheet" type="text/css" href="./w2ui-1.4.3.min.css" />
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- <script type="text/javascript" src="http://w2ui.com/src/w2ui-1.4.3.min.js"></script> -->
    <script type="text/javascript" src="./w2ui-1.4.3.min.js"></script>
</head>

<body style="height: 100%; width: 100%; margin: 0; padding: 0">
    <div id="layout" style="height: 100%; width: 100%; margin: 0; padding: 0"></div>
</body>
<script>
function onClickTestCase(event) {
    console.log('testcase: ' + event.target);
    // 判断如果是文件夹，则退出；否则查询用例的logic
    var logics = [{
        id: 'level-1',
        text: 'Level 1',
        img: 'icon-folder',
        expanded: true,
        // group: true,
        nodes: [{
            id: 'level-1-1',
            text: 'Level 1.1',
            icon: 'fa-home'
        }, {
            id: 'level-1-2',
            text: 'Level 1.2',
            icon: 'fa-star'
        }, {
            id: 'level-1-3',
            text: 'Level 1.3',
            icon: 'fa-check'
        }]
    }, {
        id: 'level-2',
        text: 'Level 2',
        img: 'icon-folder',
        expanded: true,
        // group: true,
        nodes: [{
            id: 'level-2-1',
            text: 'Level 2.1',
            img: 'icon-folder',
            nodes: [{
                id: 'level-2-1-1',
                text: 'Level 2.1.1',
                img: 'icon-page'
            }, {
                id: 'level-2-1-2',
                text: 'Level 2.1.2',
                img: 'icon-page'
            }, {
                id: 'level-2-1-3',
                text: 'Level 2.1.3',
                img: 'icon-page'
            }]
        }, {
            id: 'level-2-2',
            text: 'Level 2.2',
            img: 'icon-page'
        }, {
            id: 'level-2-3',
            text: 'Level 2.3',
            img: 'icon-page'
        }, {
            id: 'level-2-4',
            text: 'Level 2.4',
            img: 'icon-folder',
            nodes: [{
                id: 'level-2-4-1',
                text: 'Level 2.4.1',
                img: 'icon-page'
            }, {
                id: 'level-2-4-2',
                text: 'Level 2.4.2',
                img: 'icon-page'
            }, {
                id: 'level-2-4-3',
                text: 'Level 2.4.3',
                img: 'icon-page'
            }]
        }]
    }, {
        id: 'level-3',
        text: 'Level 3',
        img: 'icon-folder',
        expanded: true,
        // group: true,
        nodes: [{
            id: 'level-3-1',
            text: 'Level 3.1',
            img: 'icon-page'
        }, {
            id: 'level-3-2',
            text: 'Level 3.2',
            img: 'icon-page'
        }, {
            id: 'level-3-3',
            text: 'Level 3.3',
            img: 'icon-page'
        }]
    }];

    // 清理
    var nd = []; 
    for (var i in w2ui['sidebar_logic'].nodes) nd.push(w2ui['sidebar_logic'].nodes[i].id);
    w2ui['sidebar_logic'].remove.apply(w2ui['sidebar_logic'], nd);

    w2ui['sidebar_logic'].add(logics);
}

function onClickLogic(event) {
    console.log('logic: ' + event.target);
}

$(function() {
    // first define a layout
    var pstyle = 'background-color: #F5F6F7; border: 1px solid #dfdfdf; padding: 5px;';
    $('#layout').w2layout({
        name: 'layout',
        panels: [
            // { type: 'top',  size: 50, resizable: true, style: pstyle, content: 'top' },
            {
                type: 'left',
                size: '15%',
                resizable: true,
                style: pstyle,
                content: 'left'
            }, {
                type: 'main',
                style: pstyle,
                content: 'main'
            },
            // { type: 'preview', size: '50%', resizable: true, style: pstyle, content: 'preview' },
            {
                type: 'right',
                size: '65%',
                resizable: true,
                style: pstyle,
                content: 'right'
            }, {
                type: 'bottom',
                size: '20%',
                resizable: true,
                style: pstyle,
                content: 'bottom'
            }
        ]
    });

    // then define the sidebar
    w2ui['layout'].content('left', $().w2sidebar({
        name: 'sidebar_testcase',
        nodes: [],
        onClick: onClickTestCase,
    }));

    w2ui['layout'].content('main', $().w2sidebar({
        name: 'sidebar_logic',
        nodes: [],
        onClick: onClickLogic,
    }));


    // TODO chuqq: 直接获取用户所有的用例结构
    var nodes = [{
        id: 'level-1',
        text: 'Level 1',
        img: 'icon-folder',
        expanded: true,
        // group: true,
        nodes: [{
            id: 'level-1-1',
            text: 'Level 1.1',
            icon: 'fa-home'
        }, {
            id: 'level-1-2',
            text: 'Level 1.2',
            icon: 'fa-star'
        }, {
            id: 'level-1-3',
            text: 'Level 1.3',
            icon: 'fa-check'
        }]
    }, {
        id: 'level-2',
        text: 'Level 2',
        img: 'icon-folder',
        expanded: true,
        // group: true,
        nodes: [{
            id: 'level-2-1',
            text: 'Level 2.1',
            img: 'icon-folder',
            nodes: [{
                id: 'level-2-1-1',
                text: 'Level 2.1.1',
                img: 'icon-page'
            }, {
                id: 'level-2-1-2',
                text: 'Level 2.1.2',
                img: 'icon-page'
            }, {
                id: 'level-2-1-3',
                text: 'Level 2.1.3',
                img: 'icon-page'
            }]
        }, {
            id: 'level-2-2',
            text: 'Level 2.2',
            img: 'icon-page'
        }, {
            id: 'level-2-3',
            text: 'Level 2.3',
            img: 'icon-page'
        }, {
            id: 'level-2-4',
            text: 'Level 2.4',
            img: 'icon-folder',
            nodes: [{
                id: 'level-2-4-1',
                text: 'Level 2.4.1',
                img: 'icon-page'
            }, {
                id: 'level-2-4-2',
                text: 'Level 2.4.2',
                img: 'icon-page'
            }, {
                id: 'level-2-4-3',
                text: 'Level 2.4.3',
                img: 'icon-page'
            }]
        }]
    }, {
        id: 'level-3',
        text: 'Level 3',
        img: 'icon-folder',
        expanded: true,
        // group: true,
        nodes: [{
            id: 'level-3-1',
            text: 'Level 3.1',
            img: 'icon-page'
        }, {
            id: 'level-3-2',
            text: 'Level 3.2',
            img: 'icon-page'
        }, {
            id: 'level-3-3',
            text: 'Level 3.3',
            img: 'icon-page'
        }]
    }];

    // 清理
    var nd = []; 
    for (var i in w2ui['sidebar_testcase'].nodes) nd.push(w2ui['sidebar_testcase'].nodes[i].id);
    w2ui['sidebar_testcase'].remove.apply(w2ui['sidebar_testcase'], nd);

    w2ui['sidebar_testcase'].add(nodes);
});
</script>

</html>
